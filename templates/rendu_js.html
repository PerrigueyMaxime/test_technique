<!DOCTYPE html><html><head>    <title> test technique </title>    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script></head><body>        <div id="start_date">{{start_date}}</div>    <div id="chart"></div>    <script>        // Récupérer les données depuis Flask        var response = {{ response|tojson }};        // Extraire les catégories et les valeurs du DataFrame pandas        var start_date_list = response.data.map(function (item) { return item.start_date; });        var sum_of_daily_production = response.data.map(function (item) { return item.sum_of_daily_production; });        // Créer le trace        var trace = {            x: start_date_list,            y: sum_of_daily_production,            type: 'bar'        };        // Configurer la disposition du graphe        var layout = {            title: "{{response.title}}",            xaxis: {                title: 'Heure de la journée'            },            yaxis: {                title: 'Somme de la production en MWh'            },            width: 1500,  // Largeur de la figure en pixels            height: 800  // Hauteur de la figure en pixels        };        // Créer le graphe        var dataPlot = [trace];        Plotly.newPlot('chart', dataPlot, layout);                console.log("reload");        console.log(response.reload);                        // Fonction pour charger les données historiques via AJAX        var oldStartDate;        var newStartDate;        var dateChanged = false;                oldStartDate = $('#start_date').text();                function readStartDate() {            $.ajax({                url: '/read_start_date',                type: 'GET',                dataType: 'json',                success: function(response) {                    var response = {{ start_date|tojson }};                    newStartDate = response;                    newStartDate = new Date(newStartDate).toISOString().slice(0, 19).replace('T', ' ');                    console.log("newStartDate1");                    console.log(newStartDate);                    //return newStartDate;                },                error: function(error) {                    console.log('Une erreur s\'est produite lors du chargement des données historiques : ' + error);                }            });        }        // Fonction pour vérifier régulièrement si l'horodatage des données a changé        function checkTimestampChange() {            setInterval(function() {                //newStartDate = readStartDate();                readStartDate();                console.log("oldStartDate");                console.log(oldStartDate);                console.log("newStartDate");                console.log(newStartDate);                dateChanged = (newStartDate != oldStartDate);                console.log("dateChanged");                console.log(dateChanged);                if (dateChanged) { location.reload()};            }, 1000);  // Vérifier toutes les secondes (ajustez selon vos besoins)        }        // Appel pour vérifier régulièrement si l'horodatage des données a changé        checkTimestampChange();                    </script>    </body></html>